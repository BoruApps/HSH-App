<ion-header>
  <ion-toolbar>
    <ion-title>Notifications</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
    <ion-item-divider sticky="true" #invites_ref>
      <ion-label>
        Pending Invites ({{count_invites}})
      </ion-label>
    </ion-item-divider>
    
    <ion-list lines="full">
        <div *ngIf="count_invites > 0">
        <ion-item *ngFor="let invite of invites">
            <ion-avatar><ion-icon color="warning" size="large" name="mail-unread"></ion-icon></ion-avatar>
            <ion-label>
              <h2>{{invite.service_title}}</h2>
              <p>{{invite.service_date}}</p>
              <p *ngIf="invite.job_desc !== ''" style="white-space: pre-wrap;">{{invite.job_desc}}</p>
              <div class="invite-details-div">
                  <ion-grid class="invite-details-grid">
                    <ion-row>
                      <ion-col><p class="st">Coordinator</p></ion-col>
                      <ion-col><p class="st">City</p></ion-col>
                      <ion-col><p class="st">State</p></ion-col>
                      <ion-col><p class="st">ZIP</p></ion-col>
                    </ion-row>
                    <ion-row>
                      <ion-col><p>{{invite.coordinator}}</p></ion-col>
                      <ion-col><p>{{invite.city}}</p></ion-col>
                      <ion-col><p>{{invite.state}}</p></ion-col>
                      <ion-col><p>{{invite.zip}}</p></ion-col>
                    </ion-row>
                    <ion-row>
                      <ion-col>
                        <ion-button size="default" color="success" type="button" text="Accept" (click)="modifyInvite('accept', invite.id)" [disabled]="invite.status != 'Accepted' ? null : 'disabled'">
                          <ion-text *ngIf="invite.status != 'Accepted'">Accept</ion-text>
                          <ion-text *ngIf="invite.status == 'Accepted'">Accepted</ion-text>
                        </ion-button>
                      </ion-col>
                      <ion-col *ngIf="invite.status != 'Accepted'" >
                        <ion-button size="default"  type="button" text="Decline" (click)="modifyInvite('decline', invite.id)">
                          <ion-text>Decline</ion-text>
                        </ion-button>
                      </ion-col>
                      <ion-col>
                        <ion-button size="default" type="button" text="Question" (click)="modifyInvite('question', invite.id)">
                          <ion-text>Question</ion-text>
                        </ion-button>
                      </ion-col>
                    </ion-row>
                  </ion-grid>
                </div>
            </ion-label>
          </ion-item>
        </div>
          <p class="ion-padding" *ngIf="count_invites == 0">No invites available at this time, please check again later</p>
    </ion-list>

    <ion-item-divider sticky="true" #responses_ref>
      <ion-label>
        Responses ({{count_notifications}})
      </ion-label>
    </ion-item-divider>

    <ion-list lines="full">
        <div *ngIf="count_notifications > 0">
        <ion-item (click)="markRead(notification.id)" *ngFor="let notification of notifications">
            <ion-avatar><ion-icon color="warning" size="large" name="alert"></ion-icon></ion-avatar>
            <ion-label>
              <h2>{{notification.title}}</h2>
              <p>{{notification.date}}</p>
              <div class="invite-details-div">
                  <p>{{notification.comment}}</p>
              </div>
            </ion-label>
          </ion-item>
        </div>
          <p class="ion-padding" *ngIf="count_notifications == 0">No new notifications</p>
    </ion-list>
</ion-content>
